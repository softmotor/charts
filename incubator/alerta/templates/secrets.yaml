{{- template "common.secret" (list . "alerta.secrets") -}}
{{- define "alerta.secret" -}}
data:
  {{ if .Values.config.adminPassword }}
  adminPassword: {{ .Values.config.adminPassword | b64enc | quote }}
  {{ else }}
  adminPassword: {{ randAlphaNum 16 | b64enc | quote }}
  {{ end }}
  {{ if .Values.config.adminKey }}
  adminKey: {{ .Values.config.adminKey | b64enc | quote }}
  {{ else }}
  adminKey: {{ randAlphaNum 40 | b64enc | quote }}
  {{ end }}
  {{ if .Values.config.secretKey }}
  secretKey: {{ .Values.config.secretKey | b64enc | quote }}
  {{ else }}
  secretKey: {{ randAlphaNum 45 | b64enc | quote }}
  {{ end }}
  {{ if .Values.config.oauth2 }}
  oauth2ClientSecret: {{ .Values.config.oauth2.clientSecret | b64enc | quote }}
  {{ end }}
  {{ if .Values.config.smtp }}
  smtpPassword: {{ .Values.config.smtp.password | b64enc | quote }}
  {{ end }}
{{- end }}
